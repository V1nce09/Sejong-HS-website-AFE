<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>íšŒì›ê°€ì…</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="auth-container">
    <h1>íšŒì›ê°€ì…</h1>

    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}

    <p class="subtitle">ì‹œê°„í‘œÂ·ê¸‰ì‹ ì •ë³´ë¥¼ ë³´ê¸° ìœ„í•´ ê°€ì…í•˜ì„¸ìš”. ê°„ë‹¨í•œ ì •ë³´ë§Œ í•„ìš”í•©ë‹ˆë‹¤.</p>

    <form method="post" autocomplete="off" novalidate id="registerForm">
      <div class="input-group">
        <label>ì•„ì´ë””
          <div class="field">
            <input name="userid" type="text" required autofocus placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
          </div>
        </label>
      </div>

      <div class="input-row">
        <label>ë¹„ë°€ë²ˆí˜¸
          <div class="field has-toggle">
            <input id="pwd" name="password" type="password" required placeholder="ë¹„ë°€ë²ˆí˜¸">
            <button type="button" class="toggle-btn" data-target="pwd" aria-label="ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ">ğŸ‘</button>
          </div>
        </label>

        <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸
          <div class="field has-toggle">
            <input id="pwd2" name="password2" type="password" required placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
            <button type="button" class="toggle-btn" data-target="pwd2" aria-label="ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ">ğŸ‘</button>
          </div>
        </label>
      </div>

      <div class="input-group">
        <label>í•™ë²ˆ
          <div class="field">
            <input id="student_no" name="student_no" type="text" inputmode="numeric" pattern="\d{5}" maxlength="5" placeholder="í•™ë²ˆì„ ì…ë ¥í•˜ì„¸ìš” (5ìë¦¬)">
          </div>
        </label>
      </div>

      <button type="submit" class="submit-btn">íšŒì›ê°€ì…</button>
    </form>

    <p class="notice"><a href="{{ url_for('login') }}">ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™</a></p>
  </div>

<script>
/* ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ í† ê¸€ */
document.querySelectorAll('.toggle-btn').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    const id = btn.dataset.target;
    const inp = document.getElementById(id);
    if (!inp) return;
    inp.type = inp.type === 'password' ? 'text' : 'password';
    btn.textContent = inp.type === 'password' ? 'ğŸ‘' : 'ğŸ™ˆ';
  });
});

/* í•™ë²ˆ ìˆ«ìë§Œ í—ˆìš© */
const sn = document.getElementById('student_no');
if (sn) {
  sn.addEventListener('input', ()=> {
    sn.value = sn.value.replace(/\D/g, '').slice(0,5);
  });
}

/* í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê°„ë‹¨í•œ ì²´í¬(ì„œë²„ ê²€ì¦ì€ ìœ ì§€) */
document.getElementById('registerForm').addEventListener('submit', function(e){
  const p = document.getElementById('pwd').value;
  const p2 = document.getElementById('pwd2').value;
  if (p !== p2) {
    e.preventDefault();
    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    return false;
  }
  if (p.length < 4) {
    e.preventDefault();
    alert('ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
    return false;
  }
});
</script>
</body>
</html>